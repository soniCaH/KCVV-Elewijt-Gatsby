[build]
  base = ""
  publish = "public/"
  # Default build command.
  command = "yarn run build"

[[headers]]
  for = "/*"

  [headers.values]
    cache-control = '''
    max-age=0,
    no-cache,
    no-store,
    must-revalidate'''

[[plugins]]
  package = "netlify-plugin-gatsby-cache"

[[plugins]]
  package = "@netlify/plugin-sitemap"

  [plugins.inputs]
    buildDir = "public"
    prettyURLs = true
    exclude = [
      # By file Path
      '**/**/styleguide/**/*.html',
      '**/**/styleguide/design/*.html',
      '**/**/offline-plugin-app-shell-fallback/*.html',
      './public/offline-plugin-app-shell-fallback/index.html'
    ]

[[plugins]]
package = "@netlify/plugin-lighthouse"
  [plugins.inputs]
  # optional, fails build when a category is below a threshold
  [plugins.inputs.thresholds]
    performance = 0.9
    accessibility = 0.9
    best-practices = 0.9
    seo = 0.9
    pwa = 0.9
